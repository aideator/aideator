<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIdeator Streaming Test - Professional Experience</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 40px;
            background-color: #f9fafb;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        .stream-box {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin: 20px 0;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid #e5e7eb;
        }
        .streaming-cursor {
            display: inline-block;
            width: 2px;
            height: 1em;
            background-color: #3b82f6;
            margin-left: 3px;
            animation: blink 1.2s infinite;
            border-radius: 1px;
        }
        @keyframes blink {
            0%, 60% { opacity: 1; }
            61%, 100% { opacity: 0.2; }
        }
        .content-container {
            min-height: 300px;
            max-height: 400px;
            overflow-y: auto;
            padding: 16px;
            background-color: #f8fafc;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            font-size: 14px;
            line-height: 1.6;
        }
        .streaming-content {
            animation: streamingPulse 0.25s ease-out;
        }
        @keyframes streamingPulse {
            0% {
                opacity: 0.7;
                transform: translateY(2px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .controls {
            display: flex;
            gap: 12px;
            margin: 20px 0;
        }
        button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        button:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }
        button:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
        }
        .secondary {
            background: #f3f4f6;
            color: #374151;
        }
        .secondary:hover {
            background: #e5e7eb;
        }
        .status {
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            margin: 12px 0;
        }
        .status.streaming {
            background: #dbeafe;
            color: #1e40af;
            border: 1px solid #93c5fd;
        }
        .status.complete {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #86efac;
        }
        .test-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .metrics {
            font-size: 12px;
            color: #6b7280;
            margin-top: 12px;
        }
        .smooth-scroll {
            scroll-behavior: smooth;
            scrollbar-width: thin;
            scrollbar-color: rgba(156, 163, 175, 0.5) transparent;
        }
        .smooth-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .smooth-scroll::-webkit-scrollbar-track {
            background: transparent;
        }
        .smooth-scroll::-webkit-scrollbar-thumb {
            background-color: rgba(156, 163, 175, 0.5);
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ¯ AIdeator Streaming Experience Test</h1>
        <p>Testing the improved streaming experience with proper buffering, animations, and scroll behavior.</p>
        
        <div class="test-grid">
            <div class="stream-box">
                <h3>Professional Streaming Output</h3>
                <div id="status" class="status">Ready to stream</div>
                <div id="output" class="content-container smooth-scroll"></div>
                <div class="controls">
                    <button onclick="startStreaming()">Start Professional Stream</button>
                    <button onclick="startFastStream()">Start Fast Stream</button>
                    <button onclick="clearOutput()" class="secondary">Clear</button>
                </div>
                <div id="metrics" class="metrics">
                    Words: <span id="wordCount">0</span> | 
                    Rate: <span id="streamRate">0</span> words/sec |
                    Duration: <span id="duration">0</span>s
                </div>
            </div>
            
            <div class="stream-box">
                <h3>Streaming Features</h3>
                <ul>
                    <li>âœ… Content-based buffering (no word splitting)</li>
                    <li>âœ… Smooth fade-in animations</li>
                    <li>âœ… Professional blinking cursor</li>
                    <li>âœ… Auto-scroll to bottom</li>
                    <li>âœ… Fixed height container</li>
                    <li>âœ… Smooth scrollbars</li>
                    <li>âœ… Professional timing (60 WPM)</li>
                    <li>âœ… Proper completion state</li>
                </ul>
                
                <h4>Test Scenarios</h4>
                <ul>
                    <li><strong>Professional Stream:</strong> 60 WPM, buffered</li>
                    <li><strong>Fast Stream:</strong> 120 WPM, immediate</li>
                    <li><strong>Auto-scroll:</strong> Always follows bottom</li>
                    <li><strong>Fixed Height:</strong> No layout jumping</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        const sampleText = "This is a comprehensive demonstration of the improved streaming experience in AIdeator. The system now includes professional content buffering that respects word boundaries, ensuring no awkward text splitting during streaming. Each content update triggers a subtle fade-in animation, creating a polished and professional feel that users expect from modern AI interfaces. The streaming buffer is configured to operate at 60 words per minute, which provides an optimal balance between responsiveness and readability. The auto-scroll functionality has been enhanced to properly track the bottom of the content area using requestAnimationFrame for smooth scrolling behavior. The container maintains a fixed height to prevent layout jumping, while the custom scrollbars provide a clean, professional appearance. The blinking cursor appears only during active streaming and disappears gracefully when the stream completes. This approach creates a natural, ChatGPT-like experience that feels smooth and professional rather than choppy or jarring.";
        
        let isStreaming = false;
        let streamingInterval = null;
        let startTime = null;
        let wordCount = 0;
        
        function updateStatus(text, className = '') {
            const status = document.getElementById('status');
            status.textContent = text;
            status.className = `status ${className}`;
        }
        
        function updateMetrics() {
            const duration = startTime ? (Date.now() - startTime) / 1000 : 0;
            const rate = duration > 0 ? (wordCount / duration).toFixed(1) : 0;
            
            document.getElementById('wordCount').textContent = wordCount;
            document.getElementById('streamRate').textContent = rate;
            document.getElementById('duration').textContent = duration.toFixed(1);
        }
        
        function startStreaming(wordsPerMinute = 60) {
            if (isStreaming) return;
            
            isStreaming = true;
            startTime = Date.now();
            wordCount = 0;
            
            const output = document.getElementById('output');
            output.innerHTML = '';
            
            updateStatus('Streaming in progress...', 'streaming');
            
            // Add cursor
            const cursor = document.createElement('span');
            cursor.className = 'streaming-cursor';
            output.appendChild(cursor);
            
            const words = sampleText.split(' ');
            let currentWordIndex = 0;
            
            const msPerWord = (60 / wordsPerMinute) * 1000;
            
            streamingInterval = setInterval(() => {
                if (currentWordIndex < words.length) {
                    // Remove cursor temporarily
                    cursor.remove();
                    
                    // Add content with streaming animation
                    const contentDiv = document.createElement('div');
                    contentDiv.className = 'streaming-content';
                    contentDiv.style.display = 'inline';
                    contentDiv.textContent = words[currentWordIndex] + ' ';
                    output.appendChild(contentDiv);
                    
                    // Add cursor back
                    output.appendChild(cursor);
                    
                    // Auto-scroll to bottom
                    requestAnimationFrame(() => {
                        output.scrollTo({
                            top: output.scrollHeight,
                            behavior: 'smooth'
                        });
                    });
                    
                    currentWordIndex++;
                    wordCount++;
                    updateMetrics();
                } else {
                    // Streaming complete
                    cursor.remove();
                    clearInterval(streamingInterval);
                    isStreaming = false;
                    updateStatus('Streaming complete', 'complete');
                }
            }, msPerWord);
        }
        
        function startFastStream() {
            startStreaming(120);
        }
        
        function clearOutput() {
            if (streamingInterval) {
                clearInterval(streamingInterval);
                streamingInterval = null;
            }
            document.getElementById('output').innerHTML = '';
            isStreaming = false;
            wordCount = 0;
            startTime = null;
            updateStatus('Ready to stream');
            updateMetrics();
        }
        
        // Auto-update metrics while streaming
        setInterval(updateMetrics, 100);
    </script>
</body>
</html>